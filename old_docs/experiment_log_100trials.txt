================================================================================
LOADING AND PREPARING DATA
================================================================================

Loading personas.pkl...
Loaded 101097 tweets from 279 users
Loading LLM-inferred user metadata...
Loaded metadata for 279 users

Merging tweets with user metadata...
Combined dataset: 101097 tweets with user-level metadata

================================================================================
INFERRING TWEET-LEVEL METADATA
================================================================================

Inferring metadata for 101097 tweets...
  Processed 0/101097 tweets...
  Processed 1000/101097 tweets...
  Processed 2000/101097 tweets...
  Processed 3000/101097 tweets...
  Processed 4000/101097 tweets...
  Processed 5000/101097 tweets...
  Processed 6000/101097 tweets...
  Processed 7000/101097 tweets...
  Processed 8000/101097 tweets...
  Processed 9000/101097 tweets...
  Processed 10000/101097 tweets...
  Processed 11000/101097 tweets...
  Processed 12000/101097 tweets...
  Processed 13000/101097 tweets...
  Processed 14000/101097 tweets...
  Processed 15000/101097 tweets...
  Processed 16000/101097 tweets...
  Processed 17000/101097 tweets...
  Processed 18000/101097 tweets...
  Processed 19000/101097 tweets...
  Processed 20000/101097 tweets...
  Processed 21000/101097 tweets...
  Processed 22000/101097 tweets...
  Processed 23000/101097 tweets...
  Processed 24000/101097 tweets...
  Processed 25000/101097 tweets...
  Processed 26000/101097 tweets...
  Processed 27000/101097 tweets...
  Processed 28000/101097 tweets...
  Processed 29000/101097 tweets...
  Processed 30000/101097 tweets...
  Processed 31000/101097 tweets...
  Processed 32000/101097 tweets...
  Processed 33000/101097 tweets...
  Processed 34000/101097 tweets...
  Processed 35000/101097 tweets...
  Processed 36000/101097 tweets...
  Processed 37000/101097 tweets...
  Processed 38000/101097 tweets...
  Processed 39000/101097 tweets...
  Processed 40000/101097 tweets...
  Processed 41000/101097 tweets...
  Processed 42000/101097 tweets...
  Processed 43000/101097 tweets...
  Processed 44000/101097 tweets...
  Processed 45000/101097 tweets...
  Processed 46000/101097 tweets...
  Processed 47000/101097 tweets...
  Processed 48000/101097 tweets...
  Processed 49000/101097 tweets...
  Processed 50000/101097 tweets...
  Processed 51000/101097 tweets...
  Processed 52000/101097 tweets...
  Processed 53000/101097 tweets...
  Processed 54000/101097 tweets...
  Processed 55000/101097 tweets...
  Processed 56000/101097 tweets...
  Processed 57000/101097 tweets...
  Processed 58000/101097 tweets...
  Processed 59000/101097 tweets...
  Processed 60000/101097 tweets...
  Processed 61000/101097 tweets...
  Processed 62000/101097 tweets...
  Processed 63000/101097 tweets...
  Processed 64000/101097 tweets...
  Processed 65000/101097 tweets...
  Processed 66000/101097 tweets...
  Processed 67000/101097 tweets...
  Processed 68000/101097 tweets...
  Processed 69000/101097 tweets...
  Processed 70000/101097 tweets...
  Processed 71000/101097 tweets...
  Processed 72000/101097 tweets...
  Processed 73000/101097 tweets...
  Processed 74000/101097 tweets...
  Processed 75000/101097 tweets...
  Processed 76000/101097 tweets...
  Processed 77000/101097 tweets...
  Processed 78000/101097 tweets...
  Processed 79000/101097 tweets...
  Processed 80000/101097 tweets...
  Processed 81000/101097 tweets...
  Processed 82000/101097 tweets...
  Processed 83000/101097 tweets...
  Processed 84000/101097 tweets...
  Processed 85000/101097 tweets...
  Processed 86000/101097 tweets...
  Processed 87000/101097 tweets...
  Processed 88000/101097 tweets...
  Processed 89000/101097 tweets...
  Processed 90000/101097 tweets...
  Processed 91000/101097 tweets...
  Processed 92000/101097 tweets...
  Processed 93000/101097 tweets...
  Processed 94000/101097 tweets...
  Processed 95000/101097 tweets...
  Processed 96000/101097 tweets...
  Processed 97000/101097 tweets...
  Processed 98000/101097 tweets...
  Processed 99000/101097 tweets...
  Processed 100000/101097 tweets...
  Processed 101000/101097 tweets...
✓ Tweet-level metadata inference complete

Final dataset: 101097 tweets with full metadata

Saved prepared dataset to outputs/persona_recommendations/tweets_with_metadata.pkl

Initializing LLM client...

================================================================================
RUNNING RECOMMENDATION EXPERIMENTS (100 trials)
================================================================================

Trial 1/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 1 complete

Trial 2/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 2 complete

Trial 3/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 3 complete

Trial 4/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 4 complete

Trial 5/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 5 complete

Trial 6/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 6 complete

Trial 7/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 7 complete

Trial 8/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 8 complete

Trial 9/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 9 complete

Trial 10/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 10 complete

Trial 11/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 11 complete

Trial 12/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 12 complete

Trial 13/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 13 complete

Trial 14/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 14 complete

Trial 15/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 15 complete

Trial 16/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 16 complete

Trial 17/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 17 complete

Trial 18/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 18 complete

Trial 19/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 19 complete

Trial 20/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 20 complete

Trial 21/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 21 complete

Trial 22/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 22 complete

Trial 23/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 23 complete

Trial 24/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 24 complete

Trial 25/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 25 complete

Trial 26/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 26 complete

Trial 27/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 27 complete

Trial 28/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 28 complete

Trial 29/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 29 complete

Trial 30/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 30 complete

Trial 31/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 31 complete

Trial 32/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 32 complete

Trial 33/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 33 complete

Trial 34/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 34 complete

Trial 35/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 35 complete

Trial 36/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 36 complete

Trial 37/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 37 complete

Trial 38/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 38 complete

Trial 39/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 39 complete

Trial 40/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 40 complete

Trial 41/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 41 complete

Trial 42/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 42 complete

Trial 43/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 43 complete

Trial 44/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 44 complete

Trial 45/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 45 complete

Trial 46/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 46 complete

Trial 47/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 47 complete

Trial 48/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 48 complete

Trial 49/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 49 complete

Trial 50/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 50 complete

Trial 51/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 51 complete

Trial 52/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 52 complete

Trial 53/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 53 complete

Trial 54/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 54 complete

Trial 55/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 55 complete

Trial 56/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 56 complete

Trial 57/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 57 complete

Trial 58/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 58 complete

Trial 59/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 59 complete

Trial 60/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 60 complete

Trial 61/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 61 complete

Trial 62/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 62 complete

Trial 63/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 63 complete

Trial 64/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 64 complete

Trial 65/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 65 complete

Trial 66/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 66 complete

Trial 67/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 67 complete

Trial 68/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 68 complete

Trial 69/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 69 complete

Trial 70/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 70 complete

Trial 71/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 71 complete

Trial 72/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 72 complete

Trial 73/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 73 complete

Trial 74/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 74 complete

Trial 75/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 75 complete

Trial 76/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 76 complete

Trial 77/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 77 complete

Trial 78/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 78 complete

Trial 79/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 79 complete

Trial 80/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 80 complete

Trial 81/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 81 complete

Trial 82/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 82 complete

Trial 83/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 83 complete

Trial 84/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 84 complete

Trial 85/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 85 complete

Trial 86/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 86 complete

Trial 87/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 87 complete

Trial 88/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 88 complete

Trial 89/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 89 complete

Trial 90/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 90 complete

Trial 91/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 91 complete

Trial 92/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 92 complete

Trial 93/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 93 complete

Trial 94/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 94 complete

Trial 95/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 95 complete

Trial 96/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 96 complete

Trial 97/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 97 complete

Trial 98/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 98 complete

Trial 99/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 99 complete

Trial 100/100
----------------------------------------
  Running Version 1 (Anonymous)...
  Running Version 2 (With Author)...
  ✓ Trial 100 complete

✓ Saved results to outputs/persona_recommendations/recommendation_results.pkl

================================================================================
EXPERIMENT SUMMARY
================================================================================

Trials completed: 100
Pool size per trial: 100
Recommendations per trial: 10
Prompt style: popular

Versions compared:
  1. Anonymous: Tweet text only
  2. With Author: Tweet text + username + persona description

Results saved to: outputs/persona_recommendations

Next steps:
  - Run analyze_persona_recommendations.py to visualize results
  - Compare bias between anonymous vs with-author versions
